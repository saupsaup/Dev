{
	"version": "2.0.0",
	"tasks": [
		// ============================================================
		// 1Ô∏è‚É£  MAPOVANIE DISKU M: (Mac ‚Üí Windows VM)
		// ============================================================
		{
			"label": "Mosaic: Map M:",
			"type": "shell",
			"command": "prlctl",
			"args": [
				"exec",
				"${config:mosaic.vmName}",
				"cmd",
				"/c",
				"if not exist M: net use M: \\\\Mac\\\\Mosaic /persistent:yes"
			],
			"problemMatcher": []
		},

		// ============================================================
		// 2Ô∏è‚É£  BUILD PROJEKTU VO WINDOWS (MosaicL)
		// ============================================================
		{
			"label": "Mosaic: Build (Windows VM)",
			"type": "shell",
			"dependsOn": "Mosaic: Map M:",
			"command": "prlctl",
			"args": [
				"exec",
				"${config:mosaic.vmName}",
				"cmd",
				"/v:on",
				"/c",
				"cd /d \"${config:mosaic.mosaicBin}\" && MosaicL.exe -ttr -lnk -sg+ -sr- -log- -pub -olc- -psw- -plcpsw- -sc- -sl- -exml- -epub- -eexp+ \"${config:mosaic.makPathWin}\""
			],
			"options": {
				"cwd": "${workspaceFolder}/200"
			},

			// ========================================================
			// üß© PARSOVANIE CH√ùB DO OKNA "PROBLEMS"
			// ========================================================
			"problemMatcher": [
				{
					"owner": "st",
					"fileLocation": ["relative", "${workspaceFolder}/200"],
					"pattern": {
						"regexp": "^\\[ST:(Error|Warning)\\]\\s+([_A-Za-z0-9\\.-]+)\\s+\\((\\d+),\\s*(\\d+)\\):\\s*(.*)$",
						"severity": 1,
						"file": 2,
						"line": 3,
						"column": 4,
						"message": 5
					}
				},
				{
					"owner": "st",
					"fileLocation": ["relative", "${workspaceFolder}/200"],
					"pattern": {
						"regexp": "^\\[Xpro:(Fatal|Error)\\]\\:\\s*(.*)$",
						"severity": 1,
						"message": 2
					}
				}
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": true
			}
		}
	]
}
